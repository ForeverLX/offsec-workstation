// Window Rules
// App-specific window management

// ========== GLOBAL APPEARANCE ==========
// Rounded corners for all windows
window-rule {
    geometry-corner-radius 8
    clip-to-geometry true
}

// ========== GLOBAL GLASS LOOK ==========
// All windows: transparent when unfocused
window-rule {
    match is-focused=false
    opacity 0.35
}

// All windows: fully opaque when focused
window-rule {
    match is-focused=true
    opacity 1.0
}

// ========== BROWSERS ==========
window-rule {
    match app-id=r#"firefox$"# title="^Picture-in-Picture$"
    open-floating true
}

window-rule {
    match app-id=r#"brave-browser$"# title="^Picture-in-Picture$"
    open-floating true
}

// ========== TERMINALS ==========
// Unfocused terminals: glass look (transparent)
window-rule {
    match app-id=r#"^com\.mitchellh\.ghostty$"#
    match is-focused=false
    opacity 0.35
    // background-blur 8   // Uncomment when blur is available
}

// Focused terminals: fully opaque
window-rule {
    match app-id=r#"^com\.mitchellh\.ghostty$"#
    match is-focused=true
    opacity 1.0
}

// ========== DEVELOPMENT TOOLS ==========
// Obsidian
window-rule {
    match app-id=r#"obsidian$"#
    open-on-workspace "4"
    default-column-width { proportion 0.66667; }
}

// ========== FLOATING DIALOGS ==========
window-rule {
    match title=r#"^Open File$"#
    open-floating true
}

window-rule {
    match title=r#"^Save File$"#
    open-floating true
}

window-rule {
    match app-id=r#"pavucontrol$"#
    open-floating true
}

// ========== CONTAINER WINDOWS ==========
// Note: Container windows may need runtime detection
// We'll add these after testing actual app-ids from containers

// Example for future container apps:
// window-rule {
//     match app-id=r#"bloodhound$"#
//     open-on-workspace 5
// }

// ========== SECURITY - BLOCK FROM SCREEN CAPTURE ==========
// Uncomment to block password managers from screenshots
// window-rule {
//     match app-id=r#"^org\.keepassxc\.KeePassXC$"#
//     block-out-from "screen-capture"
// }
